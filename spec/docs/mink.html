<!DOCTYPE html>

<html>
<head>
  <title>Mink Base module</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="mink.html">
                mink.js
              </a>
            
              
              <a class="source" href="module.commented.html">
                module.commented.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="mink-base-module">Mink Base module</h1>
<p>This module defines utility methods and properties used by the framework</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="umd-definition">UMD Definition</h2>
<p>Every module - even the base - is wrapped in an UMD definition, making it easier to integrate with your development process</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(factory)</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h3 id="amd">AMD</h3>
<p>To use with any AMD loader such as Require or Almond</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    define([], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
      <span class="hljs-keyword">return</span> (<span class="hljs-built_in">window</span>.mink = factory());
    });
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h3 id="node-commonjs">Node/CommonJS</h3>
<p>To use with Browserify</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">window</span>.mink = <span class="hljs-built_in">module</span>.exports = factory();
  } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h3 id="browser-globals">Browser globals</h3>
<p>Plain and simple browser globals</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-built_in">window</span>.mink = factory();
  }
}(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
<span class="hljs-pi">  'use strict'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Gets the helper API from the current script element’s data attribute. This way, you can define a specific helper without having to create a script tag before mink.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">currentScript</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">var</span> cs = <span class="hljs-built_in">document</span>.currentScript;
    <span class="hljs-keyword">if</span>(!cs){</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>@TODO: This approach has a shortcoming with AMD loading.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> scripts = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'script'</span>);
      cs = scripts[scripts.length - <span class="hljs-number">1</span>];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>[cs.getAttribute(<span class="hljs-string">'data-helper'</span>)];
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>If mink is previously defined, we use that definition.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> mink = <span class="hljs-built_in">window</span>.mink || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="helper-hierarchy">Helper hierarchy</h2>
<p>Programmatical definition comes first. Definition in data-attribute comes second. Zepto comes third for mobile first as a default, if present. Ender comes after as our packaged helper. jQuery after that. kInk and $ if all else fails.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.helper = mink.$ = mink.$ || currentScript() || <span class="hljs-built_in">window</span>.Zepto || <span class="hljs-built_in">window</span>.ender || <span class="hljs-built_in">window</span>.jQuery || <span class="hljs-built_in">window</span>.kink || <span class="hljs-built_in">window</span>.$ || <span class="hljs-literal">false</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Warn the user if no helper is defined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (!mink.$) {
    <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'No helper ($) available!'</span>);
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>This property will contain pointers to all mink module constructors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.fn = mink.fn || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>This property will contain pointers to all mink module methods in the helper library</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.$fn = mink.$fn || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>A pointer for mink inside the helper library.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.$.fn.mink = mink;</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="module-defaults">Module Defaults</h2>
<p>mink modules default settings. These sensible defaults will be overriden by module defaults and runtime options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.defaults = mink.defaults || {</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>The name of the module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    name: <span class="hljs-string">'mink'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>A unique identifier used to namespace events, and preserve the module instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    namespace: <span class="hljs-string">'minkModule'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Whether debug content should be outputted to console</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    debug: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Whether extra debug content should be outputted</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    verbose: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Whether to track performance data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    performance: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>A flag to auto initialize the module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    autoInit: <span class="hljs-literal">true</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>A flag to  mark the module as being autoloaded</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    autoloaded: <span class="hljs-literal">false</span>
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <h2 id="module-registry">Module registry</h2>
<p>An internal registry of all the module instances in the page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink._registry = mink._registry || {};</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <h2 id="module-factory">Module factory</h2>
<p>Method to create module constructors.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.factory = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(defaults)</span> </span>{
    defaults = defaults || {};
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mod</span><span class="hljs-params">(element, options)</span></span>{
      <span class="hljs-keyword">var</span>
        $ = mink.$,</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Extend settings to merge run-time settings with defaults</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        settings = $.extend({}, $.fn.mink.defaults, defaults, options || {}),</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Alias settings object for convenience and performance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        namespace = settings.namespace,
        performance = [],
        <span class="hljs-built_in">module</span> = <span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Initialize the registry key for the modules if it’s not set yets</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      mink._registry[settings.name] = mink._registry[settings.name] || [];</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <h3 id="module-properties-and-methods">Module Properties and Methods</h3>
<p>Define namespaces for storing module instance and binding events</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.queryArguments = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">3</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <h4 id="module-namespace">Module Namespace</h4>
<p>Used to identify the module metada within a namespace</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.moduleNamespace = namespace;</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <h4 id="module-event-namespace">Module Event Namespace</h4>
<p>Used to identify all event handlers the module uses</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.eventNamespace = <span class="hljs-string">'.'</span> + namespace;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <h4 id="all-modules-instances">All Modules instances</h4>
<p>A reference to all modules instances of the same type. This is useful if your module wants to interact with other instances in the page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.allModules = mink._registry[settings.name];</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <h4 id="module-id">Module ID</h4>
<p>The module index inside the allModule reference
@TODO: Get a better way to handle this</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.moduleId = <span class="hljs-keyword">this</span>.allModules.push(<span class="hljs-keyword">this</span>) - <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <h4 id="element">Element</h4>
<p>The element the module instance is refering to</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.element = element;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <h4 id="-element">$element</h4>
<p>The module element wrapped as an helper API object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.$element = $(element);</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <h4 id="settings">Settings</h4>
<p>A reference to the module settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.settings = settings;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <h4 id="attributes">Attributes</h4>
<p>Data attributes of the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.attrs = <span class="hljs-keyword">this</span>.$element.data();</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <h4 id="instance">Instance</h4>
<p>The module instance is stored and retrieved in namespaced DOM metadata</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.instance = <span class="hljs-keyword">this</span>.$element.data(<span class="hljs-keyword">this</span>.moduleNamespace);</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <h4 id="performance">Performance</h4>
<p>Called on each debug statement and logs the time since the last debug statement.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">this</span>.performance = {
        
        log: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(message)</span> </span>{
          <span class="hljs-keyword">var</span>
            currentTime,
            executionTime,
            previousTime;
          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.settings.performance) {
            currentTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
            previousTime = <span class="hljs-built_in">module</span>.time || currentTime;
            executionTime = currentTime - previousTime;
            <span class="hljs-built_in">module</span>.time = currentTime;
            performance.push({
              <span class="hljs-string">'Element'</span>: element,
              <span class="hljs-string">'Name'</span>: message[<span class="hljs-number">0</span>],
              <span class="hljs-string">'Arguments'</span>: [].slice.call(message, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>] || <span class="hljs-string">''</span>,
              <span class="hljs-string">'Execution Time'</span>: executionTime
            });
          }
          clearTimeout(<span class="hljs-built_in">module</span>.performance.timer);
          <span class="hljs-built_in">module</span>.performance.timer = setTimeout(<span class="hljs-built_in">module</span>.performance.display, <span class="hljs-number">100</span>);
        },
        
        display: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">var</span>
            title = <span class="hljs-built_in">module</span>.settings.name + <span class="hljs-string">':'</span>,
            totalTime = <span class="hljs-number">0</span>;
          <span class="hljs-built_in">module</span>.time = <span class="hljs-literal">false</span>;
          clearTimeout(<span class="hljs-built_in">module</span>.performance.timer);
          $.each(performance, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index, data)</span> </span>{
            totalTime += data[<span class="hljs-string">'Execution Time'</span>];
          });
          title += <span class="hljs-string">' '</span> + totalTime + <span class="hljs-string">'ms'</span>;
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.moduleSelector) {
            title += <span class="hljs-string">' \''</span> + <span class="hljs-keyword">this</span>.moduleSelector + <span class="hljs-string">'\''</span>;
          }
          <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">console</span>.group !== <span class="hljs-literal">undefined</span> || <span class="hljs-built_in">console</span>.table !== <span class="hljs-literal">undefined</span>) &amp;&amp; performance.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">console</span>.groupCollapsed(title);
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">console</span>.table) {
              <span class="hljs-built_in">console</span>.table(performance);
            } <span class="hljs-keyword">else</span> {
              $.each(performance, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index, data)</span> </span>{
                <span class="hljs-built_in">console</span>.log(data[<span class="hljs-string">'Name'</span>] + <span class="hljs-string">': '</span> + data[<span class="hljs-string">'Execution Time'</span>] + <span class="hljs-string">'ms'</span>);
              });
            }
            <span class="hljs-built_in">console</span>.groupEnd();
          }
          performance = [];
        }
      };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Initialize module if autoInit is set to true</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(settings.autoInit) {
        <span class="hljs-keyword">this</span>.initialize();
      }

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }

    mod.prototype = {</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h4 id="initialize-method">Initialize Method</h4>
<p>This method is the first one to be called once a module is instantiated
Every module should implement their own method.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Your module is lacking an initialize method'</span>);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h4 id="destroy-method">Destroy Method</h4>
<p>Every module should implement their own destroy method
This method is responsible to restore the DOM to the same state as it was before the module was instantiated. This includes - but is not limited to - removing the following:</p>
<ul>
<li>event listeners, </li>
<li>removing CSS classes</li>
<li>generated DOM elements and attributes</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>      destroy: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">'Your module is lacking a destroy method'</span>);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <h4 id="setting-method">Setting Method</h4>
<p>Get or set setting properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      setting: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, value)</span> </span>{
        <span class="hljs-keyword">if</span> ($.isPlainObject(name)) {
          $.extend(<span class="hljs-keyword">this</span>.settings, name);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">this</span>.settings[name] = value;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.settings[name];
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <h4 id="internal-method">Internal Method</h4>
<p>Module internals can be set or retrieved as well</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      internal: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, value)</span> </span>{
        <span class="hljs-keyword">if</span> ($.isPlainObject(name)) {
          $.extend(<span class="hljs-keyword">this</span>, name);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">this</span>[name] = value;
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[name];
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <h4 id="debug-method">Debug Method</h4>
<p>Debug pushes arguments to the console formatted as a debug statement</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      debug: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.debug) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.performance) {
            <span class="hljs-keyword">this</span>.performance.log(<span class="hljs-built_in">arguments</span>);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.debug = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.info, <span class="hljs-built_in">console</span>, <span class="hljs-keyword">this</span>.settings.name + <span class="hljs-string">':'</span>);
            <span class="hljs-keyword">this</span>.debug.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
          }
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <h4 id="verbose-method">Verbose Method</h4>
<p>Calling verbose internally allows for additional data to be logged which can assist in debugging</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      verbose: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.verbose &amp;&amp; <span class="hljs-keyword">this</span>.settings.debug) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.settings.performance) {
            <span class="hljs-keyword">this</span>.performance.log(<span class="hljs-built_in">arguments</span>);
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.verbose = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.info, <span class="hljs-built_in">console</span>, <span class="hljs-keyword">this</span>.settings.name + <span class="hljs-string">':'</span>);
            <span class="hljs-keyword">this</span>.verbose.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
          }
        }
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <h4 id="error-method">Error Method</h4>
<p>Error allows for the module to report named error messages, it may be useful to modify this to push error messages to the user. Error messages are defined in the modules settings object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      error: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.error = <span class="hljs-built_in">Function</span>.prototype.bind.call(<span class="hljs-built_in">console</span>.error, <span class="hljs-built_in">console</span>, <span class="hljs-keyword">this</span>.settings.name + <span class="hljs-string">':'</span>);
        <span class="hljs-keyword">this</span>.error.apply(<span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <h4 id="invoke-method">Invoke Method</h4>
<p>Invoke is used to match internal functions to string lookups.
<code>$(&#39;.foo&#39;).example(&#39;invoke&#39;, &#39;set text&#39;, &#39;Foo&#39;)</code>
Method lookups are lazy, looking for many variations of a search string
For example ‘set text’, will look for both <code>setText : function(){}</code>, <code>set: { text: function(){} }</code>
Invoke attempts to preserve the ‘this’ chaining unless a value is returned.
If multiple values are returned an array of values matching up to the length of the selector is returned</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      invoke: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(query, passedArguments, context)</span> </span>{
        <span class="hljs-keyword">var</span>
        maxDepth,
        found,
        response;
        passedArguments = passedArguments || <span class="hljs-keyword">this</span>.queryArguments;
        context = context || <span class="hljs-keyword">this</span>.instance || <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = <span class="hljs-keyword">this</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> query === <span class="hljs-string">'string'</span> &amp;&amp; <span class="hljs-built_in">module</span>.instance !== <span class="hljs-literal">undefined</span>) {
          query = query.split(<span class="hljs-regexp">/[\. ]/</span>);
          maxDepth = query.length - <span class="hljs-number">1</span>;
          $.each(query, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(depth, value)</span> </span>{
            <span class="hljs-keyword">var</span> camelCaseValue = (depth !== maxDepth) ? value + query[depth + <span class="hljs-number">1</span>].charAt(<span class="hljs-number">0</span>).toUpperCase() + query[depth + <span class="hljs-number">1</span>].slice(<span class="hljs-number">1</span>) : query;
            <span class="hljs-keyword">if</span> ($.isPlainObject(<span class="hljs-built_in">module</span>.instance[value]) &amp;&amp; (depth !== maxDepth)) {
              <span class="hljs-built_in">module</span>.instance = <span class="hljs-built_in">module</span>.instance[value];
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($.isPlainObject(<span class="hljs-built_in">module</span>.instance[camelCaseValue]) &amp;&amp; (depth !== maxDepth)) {
              <span class="hljs-built_in">module</span>.instance = <span class="hljs-built_in">module</span>.instance[camelCaseValue];
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.instance[value] !== <span class="hljs-literal">undefined</span>) {
              found = <span class="hljs-built_in">module</span>.instance[value];
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.instance[camelCaseValue] !== <span class="hljs-literal">undefined</span>) {
              found = <span class="hljs-built_in">module</span>.instance[camelCaseValue];
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            } <span class="hljs-keyword">else</span> {
              <span class="hljs-built_in">module</span>.error(<span class="hljs-string">'The method you called is not defined.'</span>, query);
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
          });
        }
        <span class="hljs-keyword">if</span> ( $.isFunction(found) ) {
          response = found.apply(context, [passedArguments]);
        } 
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (found !== <span class="hljs-literal">undefined</span>) {
          response = found;
        }

        <span class="hljs-keyword">return</span> response;
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <h4 id="dataattributes-method">DataAttributes Method</h4>
<p>Reads and sets the setting object depending on their data-attributes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      dataAttributes: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.debug(<span class="hljs-string">'Setting data attributes settings'</span>);
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.settings.metadata){
          <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = <span class="hljs-keyword">this</span>;
          $.each(<span class="hljs-keyword">this</span>.settings.metadata, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index, value)</span> </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.attrs[index] !== <span class="hljs-literal">undefined</span>) {
              <span class="hljs-built_in">module</span>.settings[index] = <span class="hljs-built_in">module</span>.attrs[index];
            }
          });
        } 
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <h4 id="throttling-method">Throttling Method</h4>
<p>Throttles a function to a certain delay.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      throttle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(func, delay)</span> </span>{
        <span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">var</span> context = <span class="hljs-keyword">this</span>, args = <span class="hljs-built_in">arguments</span>;

          <span class="hljs-keyword">if</span> (timer == <span class="hljs-literal">null</span>) {
            timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
              func.apply(context, args);
              timer = <span class="hljs-literal">null</span>;
            }, delay);
          }
        };
      }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Expose the module defaults as a property of the constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mod._defaults = defaults;

    <span class="hljs-keyword">return</span> mod; 
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <h2 id="expose-method">Expose Method</h2>
<p>Expose module in the window, inside the mink object and as a method of the helper API</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  mink.expose = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(name, Constructor)</span> </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Saves the old module definition</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> old = mink.$.fn[name];

    mink.fn[name] = Constructor;

    Constructor._name = name;

    mink.$fn[name] = mink.$.fn[name] = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(parameters)</span> </span>{

      <span class="hljs-keyword">var</span></pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Store a reference to the module group, this can be useful to refer to other modules inside each module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $allModules = $(<span class="hljs-keyword">this</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Preserve original arguments to determine if a method is being invoked</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      query = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>],</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Check if we’ve invoked a method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      methodInvoked = (<span class="hljs-keyword">typeof</span> query === <span class="hljs-string">'string'</span>),
      returnedValue;</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Iterate over all elements to initialize module</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      $allModules
        .each(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
          <span class="hljs-keyword">var</span> settings = ($.isPlainObject(parameters)) ? parameters : {};

          settings.autoInit = <span class="hljs-literal">false</span>;
          
          <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = <span class="hljs-keyword">new</span> Constructor(<span class="hljs-keyword">this</span>, settings);

          <span class="hljs-keyword">if</span> (methodInvoked) {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.instance === <span class="hljs-literal">undefined</span>) {
              <span class="hljs-built_in">module</span>.initialize();
            }
            <span class="hljs-keyword">var</span> response = <span class="hljs-built_in">module</span>.invoke(query);</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h3 id="invocation-response">Invocation response</h3>
<p>If a user passes in multiple elements invoke will be called for each element and the value will be returned in an array
For example <code>$(&#39;.things&#39;).example(&#39;has text&#39;)</code> with two elements might return <code>[true, false]</code> and for one element <code>true</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> ($.isArray(returnedValue)) {

              returnedValue.push(response);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (returnedValue !== <span class="hljs-literal">undefined</span>) {

              returnedValue = [returnedValue, response];
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response !== <span class="hljs-literal">undefined</span>) {

              returnedValue = response;
            }
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>if no method call is required we simply initialize the plugin, destroying it if it exists already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">module</span>.instance !== <span class="hljs-literal">undefined</span>) {
              <span class="hljs-built_in">module</span>.destroy();
            }
            <span class="hljs-built_in">module</span>.initialize();
          }
      });
      <span class="hljs-keyword">if</span> ( returnedValue !== <span class="hljs-literal">undefined</span> ){

        <span class="hljs-keyword">return</span> returnedValue;
      } <span class="hljs-keyword">else</span> {

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
      }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>Expose the constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mink.$.fn[name].constructor = Constructor;</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <h2 id="noconflict-method-for-the-helper-api-interface">noConflict method for the helper API interface</h2>

            </div>
            
            <div class="content"><div class='highlight'><pre>    mink.$.fn[name].noConflict = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
      mink.$.fn[name] = old;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

  };

  <span class="hljs-keyword">return</span> mink;

}));</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
